(this.webpackJsonpbloglist=this.webpackJsonpbloglist||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),l=n.n(o),u=n(2),c=n.n(u),s=n(4),i=n(16),g=n(3),d=function(e){var t=e.title,n=e.author,a=e.url,o=e.votes,l=e.addVote;return r.a.createElement("div",{className:"Blog"},r.a.createElement("h4",null,t),r.a.createElement("ul",null,"by: ",n),r.a.createElement("ul",null,r.a.createElement("a",{href:a}," ",a)),r.a.createElement("ul",{className:"votes"},o," votes"),r.a.createElement("ul",null,r.a.createElement("button",{onClick:l},"vote")))},m=function(e){var t=e.blogs,n=e.addVote;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement(d,{key:e.id,title:e.title,author:e.author,url:e.url,votes:e.votes,id:e.id,addVote:function(){return n(e.id)}})})))},f=function(e){var t=e.onSubmit,n=e.handleChangeBlog,a=e.handleChangeAuthor,o=e.handleChangeUrl,l=e.valueBlog,u=e.valueAuthor,c=e.valueUrl;return r.a.createElement("div",null,r.a.createElement("h2",null,"Create a new blogpost"),r.a.createElement("form",{class:"container",onSubmit:t},r.a.createElement("p",null,"title: ",r.a.createElement("input",{value:l,onChange:n})),r.a.createElement("p",null,"author: ",r.a.createElement("input",{value:u,onChange:a})),r.a.createElement("p",null,"address: ",r.a.createElement("input",{value:c,onChange:o})),r.a.createElement("p",null,r.a.createElement("button",{type:"submit"},"add"))))},v=n(5),h=n.n(v),p=null,b={getAll:function(){return h.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,h.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return h.a.put("".concat("/api/blogs","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){p="bearer ".concat(e)}},E={login:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:t.type},t.message)},k=function(e){var t=Object(a.useState)(e.blogs),n=Object(g.a)(t,2),o=n[0],l=n[1],u=Object(a.useState)(""),d=Object(g.a)(u,2),v=d[0],h=d[1],p=Object(a.useState)(""),k=Object(g.a)(p,2),O=k[0],j=k[1],y=Object(a.useState)(""),S=Object(g.a)(y,2),C=S[0],A=S[1],T=Object(a.useState)(""),B=Object(g.a)(T,2),N=B[0],x=B[1],I=Object(a.useState)(""),U=Object(g.a)(I,2),L=U[0],V=U[1],D=Object(a.useState)(null),H=Object(g.a)(D,2),J=H[0],G=H[1],K=Object(a.useState)(null),P=Object(g.a)(K,2),Y=P[0],z=P[1];Object(a.useEffect)((function(){b.getAll().then((function(e){l(e)})).catch((function(e){alert("There has been an error fetching your blogs.")}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);G(t),b.setToken(t.token)}}),[]);var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";z({message:e,type:t}),setTimeout((function(){z(null)}),6e3)},q=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.login({username:N,password:L});case 4:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),b.setToken(n.token),G(n),x(""),V(""),R("login successful!"),console.log("Login successful!"),setTimeout((function(){R(null)}),5e3),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),R("Incorrect login!","error"),console.log("Incorrect login!"),setTimeout((function(){R(null)}),5e3);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"mainBody"},r.a.createElement("h1",null,"Blog Logger"),r.a.createElement("p",null,"Enter new found blogs that peak your interest and let others vote on them!"),r.a.createElement(w,{message:Y}),null===J?r.a.createElement("form",{onSubmit:q},r.a.createElement("div",null,"username "," ",r.a.createElement("input",{type:"text",value:N,name:"Username",onChange:function(e){var t=e.target;return x(t.value)}})),r.a.createElement("div",null,"password "," ",r.a.createElement("input",{type:"password",value:L,name:"Password",onChange:function(e){var t=e.target;return V(t.value)}})),r.a.createElement("p",null,r.a.createElement("button",{type:"submit"},"login"))):r.a.createElement("div",null,r.a.createElement("p",null,J.name," is currently logged in"),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(e){e.preventDefault();try{window.localStorage.removeItem("loggedNoteappUser"),R("You have been logged out!"),console.log("You have been logged out!"),window.location.reload(!1)}catch(t){R("Logout failed!","error"),console.log("Logout failed!"),setTimeout((function(){R(null)}),5e3)}}},"logout")),r.a.createElement(f,{onSubmit:function(e){e.preventDefault(),console.log("Blog added",e.target.value);var t={title:v,author:O,url:C,votes:0};b.create(t).then((function(e){l(o.concat(e)),h(""),j(""),A(""),R("Blog added!"),console.log("Blog added!"),setTimeout((function(){R(null)}),5e3)})).catch((function(e){R("Error, your blog was not added! Check all fields.","error"),console.log("Error, your blog was not added! Check all fields."),setTimeout((function(){R(null)}),5e3)}))},valueBlog:v,valueAuthor:O,valueUrl:C,handleChangeBlog:function(e){console.log(e.target.value),h(e.target.value)},handleChangeAuthor:function(e){console.log(e.target.value),j(e.target.value)},handleChangeUrl:function(e){console.log(e.target.value),A(e.target.value)}})),r.a.createElement(m,{blogs:o,addVote:function(e){var t=o.find((function(t){return t.id===e})),n=Object(i.a)({},t,{votes:t.votes+1});b.update(e,n).then((function(t){l(o.map((function(n){return n.id!==e?n:t})))})).catch((function(e){alert("Voting error!"),console.log("Voting error!")}))},id:e.id,votes:e.votes}))};n(40);l.a.render(r.a.createElement(k,{blogs:[{id:1,author:"Andrew Skurka",title:"Andrew Skurka: Hard-won insights from out there",url:"https://andrewskurka.com/",votes:7},{id:2,author:"Alan Dixon",title:"ULTRALIGHT BACKPACKING & HIKING",url:"https://www.adventurealan.com/",votes:5},{id:3,author:"Derek Hansen",title:"The Ultimate Hang",url:"https://theultimatehang.com/blog/",votes:3}]}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.704329d6.chunk.js.map